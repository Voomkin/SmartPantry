<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">SmartPantry/screens/MyInfo.js | Smart Pantry System Manual</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Group 3 Smart Pantry CSEE 481"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="Smart Pantry System Manual"><meta property="twitter:description" content="Group 3 Smart Pantry CSEE 481"><meta property="twitter:image" content="http://my-library.org/logo.png"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./" style="display: flex; align-items: center;"><img src="./image/brand_logo.png" style="width:34px;"></a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/Voomkin/SmartPantry/tree/master"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-createItem">createItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-createPantry">createPantry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-createShoppingList">createShoppingList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-deleteItem">deleteItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-deletePantry">deletePantry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-deleteShoppingList">deleteShoppingList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-updateItem">updateItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-updatePantry">updatePantry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-updateShoppingList">updateShoppingList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getItem">getItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getPantry">getPantry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getShoppingList">getShoppingList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-listItems">listItems</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-listPantries">listPantries</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-listShoppingLists">listShoppingLists</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-onCreateItem">onCreateItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-onCreatePantry">onCreatePantry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-onCreateShoppingList">onCreateShoppingList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-onDeleteItem">onDeleteItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-onDeletePantry">onDeletePantry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-onDeleteShoppingList">onDeleteShoppingList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-onUpdateItem">onUpdateItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-onUpdatePantry">onUpdatePantry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-onUpdateShoppingList">onUpdateShoppingList</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components">components</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Card">Card</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CustomDrawer">CustomDrawer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Header">Header</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Heading">Heading</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#screens">screens</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AboutScreen">AboutScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AccountsScreen">AccountsScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-sendEmail">sendEmail</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AddItemScreen">AddItemScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AddShoppingListItemScreen">AddShoppingListItemScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-BarcodeAddScreen">BarcodeAddScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CreatePantryScreen">CreatePantryScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CreditsScreen">CreditsScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-GlobalText">GlobalText</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-HelpScreen">HelpScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-HomeStackScreen">HomeStackScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ManualAddScreen">ManualAddScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-MyInfoScreen">MyInfoScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-NotificationsScreen">NotificationsScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-OtherPantryScreen">OtherPantryScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ProfileScreen">ProfileScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-SettingsStackScreen">SettingsStackScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ShoppingStackScreen">ShoppingStackScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-WelcomeScreen">WelcomeScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-customTheme">customTheme</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">SmartPantry/screens/MyInfo.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import React, { Component, useState, useEffect} from &quot;react&quot;;
import {
  Text,
  View,
  ScrollView,
  Button,
  Alert,
} from &quot;react-native&quot;;
import {Auth, API, graphqlOperation} from &apos;aws-amplify&apos;;
import { getPantry, listItems } from &quot;../queries&quot;;
import { Heading } from &apos;native-base&apos;
import { StyleSheet } from &apos;react-native&apos;;

{/*const getPantryInfo = async (user) =&gt; {
    try {
        const pantryData = await API.graphql(
            graphqlOperation(getPantry, { id: user.username.toString() })
        );

        if (pantryData.data.getPantry == null) {
            const outputString = &quot;Email: &quot; + user.attributes.email + &quot;\nPhone Number: &quot; + user.attributes.phone_number + &quot;\nNo pantry information to display&quot;
            Alert.alert(&quot;User Information&quot;, outputString);
            return null;
        }
        else {

            const pantryName = pantryData.data.getPantry.name;
            const dateCreated = pantryData.data.getPantry.createdAt;
            const dateUpdated = pantryData.data.getPantry.updatedAt;

            const pantryId = pantryData.data.getPantry.id;

            const itemsList = await API.graphql(
                graphqlOperation(listItems, {
                filter: {
                    pantryItemsId: {
                    eq: pantryId.toString(),
                    },
                },
                })
            );

            const b = itemsList.data.listItems.items;

            let itemCount = 0;

            const countItems = b.map( async (item) =&gt; {
                itemCount += 1;
            });

            let outputString = &quot;Email: &quot; + user.attributes.email + &quot;\nPhone Number: &quot; + user.attributes.phone_number + &quot;\nPantry Name: &quot; + pantryName;
            outputString += &quot;\nPantry Create Date: &quot; + dateCreated + &quot;\nLast Pantry Update: &quot; + dateUpdated + &quot;\nSize of Pantry: &quot; + itemCount;

            Alert.alert(&quot;User Information&quot;, outputString)
            //NOTE: Whenever this is finalized, it would probably be best to display a more user-friendly piece of data than a timestamp (basically just make it more legible)
        }

    } catch(err) {
        console.log(err);
    }
}*/}

/**
 * @author Kollin Labowski
 * @author Shannon Biega
 * @author Ryan Mraz
 * @param navigation - Used to navigate for the Settings stack 
 * @returns Displays information about the user
 */
const MyInfoScreen = ({ navigation }) =&gt; {
   useEffect(() =&gt; {
        const unsubscribe = navigation.addListener(&quot;focus&quot;, () =&gt; {
            fetchInfo();
        });
        return unsubscribe;
      }, [navigation]);

    const [email, setEmail]= useState(&quot;&quot;);
    const [phoneNumber, setPhoneNumber]= useState(&quot;&quot;);


    const fetchInfo = async () =&gt; {
        console.log(&quot;HERE&quot;) 
        // alert(email);
        try {
            const user = await Auth.currentAuthenticatedUser();
            // console.log(user);
    
            // const email = user.attributes.email;
            // const phone_number = user.attributes.phone_number;
    
            setEmail(user.attributes.email); 
            setPhoneNumber([user.attributes.phone_number.substring(0,2), &apos;-&apos;, user.attributes.phone_number.substring(2,5),&apos;-&apos;,user.attributes.phone_number.substring(5,8),&apos;-&apos;,user.attributes.phone_number.substring(8,12)]);
    
            // alert(phone_number);
            //const pantryStats = getPantryInfo(user);
            // return (&lt;Text style={{fontSize: 17, textAlign: &apos;center&apos;, margin: 10}}&gt;{email}&lt;/Text&gt;)
            
        } catch (err) {
            console.log(err);
        }
    }
    return (
    &lt;ScrollView style={{backgroundColor: &apos;#b5e48c&apos;}}&gt;    
       
        &lt;View style={{flexDirection: &apos;row&apos;, alignItems: &apos;center&apos;}}&gt;
        &lt;View style={{flex: 1, height: 1, backgroundColor: &apos;black&apos;}} /&gt;
        &lt;View&gt;&lt;Text style={[styles.paddedHeading, styles.width_username]}&gt;Email&lt;/Text&gt;&lt;/View&gt;
        &lt;View style={{flex: 1, height: 1, backgroundColor: &apos;black&apos;}} /&gt;
        &lt;/View&gt; 
        &lt;Text style={{fontSize: 17, textAlign: &apos;center&apos;, margin: 10}}&gt;{email}&lt;/Text&gt;
        &lt;View style={{flexDirection: &apos;row&apos;, alignItems: &apos;center&apos;}}&gt;
        &lt;View style={{flex: 1, height: 1, backgroundColor: &apos;black&apos;}} /&gt;
        &lt;View&gt;&lt;Text style={[styles.paddedHeading, styles.width_phonenumber]}&gt;Phone Number&lt;/Text&gt;&lt;/View&gt;
        &lt;View style={{flex: 1, height: 1, backgroundColor: &apos;black&apos;}} /&gt;
        &lt;/View&gt; 
        &lt;Text style={{fontSize: 17, textAlign: &apos;center&apos;, margin: 10}}&gt;{phoneNumber}&lt;/Text&gt;  
        
      &lt;/ScrollView&gt;
    );
};

/*
const fetchInfo = async () =&gt; {
    // alert(email);
    try {
        const user = await Auth.currentAuthenticatedUser();
        // console.log(user);

        const email = user.attributes.email;
        const phone_number = user.attributes.phone_number;
        // alert(phone_number);
        const pantryStats = getPantryInfo(user);
        
    } catch (err) {
        console.log(err);
    }

    // alert(email);

    return (
        &lt;View style={{ flex: 1, alignItems: &quot;center&quot;, justifyContent: &quot;center&quot; }}&gt;
            &lt;Text&gt;
                EMAIL
            &lt;/Text&gt;
        &lt;/View&gt;
    );
}*/
const styles = StyleSheet.create({
    paddedHeading : {
      fontWeight: &apos;bold&apos;,
      fontSize: 19,
      textAlign: &apos;center&apos;,
      margin: 20
    },
    width_email:{
        width: 55,
    },
    width_phonenumber:{
        width: 140,
    }
  });


export default MyInfoScreen;</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
